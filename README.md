# Проект: Построение минимального микросервиса с FastApi и тесты

## Описание проекта

Данный проект представляет собой микросервис, реализованный на **FastAPI**, который предоставляет API для управления пользователями. В проекте реализованы основные CRUD-операции, поддерживается пагинация, а также включены тесты для проверки работоспособности сервиса.

## Установка и запуск

### 1. Клонирование репозитория

```bash
git clone <URL_РЕПОЗИТОРИЯ>
cd project
```

### 2. Установка зависимостей

Рекомендуется создать виртуальное окружение перед установкой зависимостей:

```bash
python -m venv venv
source venv/bin/activate  # Для Linux/macOS
venv\Scripts\activate     # Для Windows
```

Далее установить зависимости:

```bash
pip install -r requirements.txt
```

### 3. Настройка переменных окружения

Создайте файл **.env** на основе **.env.example** и укажите:

```
APP_URL=http://127.0.0.1:8002
HOST=127.0.0.1
PORT=8002
```

### 4. Запуск сервиса

```bash
uvicorn main:app --host 0.0.0.0 --port 8002 --reload
```

## API эндпоинты


| Метод | URL               | Описание                                                                   |
| ---------- | ----------------- | ---------------------------------------------------------------------------------- |
| `GET`      | `/status`         | Проверка доступности сервиса                             |
| `GET`      | `/api/users/`     | Получение списка пользователей с пагинацией |
| `POST`     | `/api/users/`     | Добавление нового пользователя                         |
| `GET`      | `/api/users/{id}` | Получение информации о пользователе                |
| `PUT`      | `/api/users/{id}` | Обновление данных пользователя                         |
| `DELETE`   | `/api/users/{id}` | Удаление пользователя                                          |

## Запуск тестов

### 1. Запуск всех тестов

```bash
pytest tests/
```

### 2. Запуск отдельных групп тестов

#### Тесты API

```bash
pytest tests/test_api.py
```

#### Тесты пагинации

```bash
pytest tests/test_pagination.py
```

#### Smoke-тесты (проверка доступности сервиса)

```bash
pytest tests/test_smoke.py
```

## Дополнительная информация

* В проекте используются **pytest** для тестирования, **requests** для взаимодействия с API и **FastAPI** как основной фреймворк.
* В файле **conftest.py** определены фикстуры для работы с API и тестами.
* В **test\_smoke.py** добавлены дополнительные проверки на доступность сервиса, включая проверку открытия порта.

## Контакты

Если у вас есть вопросы или предложения, создавайте issue в репозитории!
